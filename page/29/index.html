<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Kylin</title><meta name="keywords" content="学习，博客，技术交流，学习记录，Kylin，kylin"><meta name="author" content="Kylin"><meta name="copyright" content="Kylin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="学习不易，努力努力~">
<meta property="og:type" content="website">
<meta property="og:title" content="Kylin">
<meta property="og:url" content="https://www.codekylin.cn/page/29/index.html">
<meta property="og:site_name" content="Kylin">
<meta property="og:description" content="学习不易，努力努力~">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/kylincw/images/raw/master/img/20200807181526.jpg">
<meta property="article:author" content="Kylin">
<meta property="article:tag" content="学习，博客，技术交流，学习记录，Kylin，kylin">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/kylincw/images/raw/master/img/20200807181526.jpg"><link rel="shortcut icon" href="https://gitee.com/kylincw/images/raw/master/img/20200807181548.png"><link rel="canonical" href="https://www.codekylin.cn/page/29/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><meta name="google-site-verification" content="gzeyWstt6NoTZKh7YFYNLNziL8HIZ8YH2Ug7xTDX5-Y"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?f76c34daefe747deee7c7be3ead2ba80";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-159334016-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-159334016-1');
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":90,"position":"top","messagePrev":"自上次更新以来已经","messageNext":"天，文章的内容可能已过时或存在差异。"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50000,"languages":{"author":"作者: Kylin","link":"链接: ","source":"来源: Kylin","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#FF0000","bgDark":"#2d3035","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-01-29 19:26:07'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kylincw/img/img/custom.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1993646_z05rabxf05h.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kylincw/img/img/icon.css"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Kylin" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="https://gitee.com/kylincw/images/raw/master/img/20200807181526.jpg" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/kylincw/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">349</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">423</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">96</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/kylincw/img//img20201017211426.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Kylin</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Kylin</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/kylincw" target="_blank" title="Github"><i class="iconfont icon-github"></i></a><a class="social-icon" href="tencent://message/?Menu=yes&amp;uin=171346168&amp;Service=300&amp;sigT=45a1e5847943b64c6ff3990f8a9e644d2b31356cb0b4ac6b24663a3c8dd0f8aa12a595b1714f9d45" target="_blank" title="qq"><i class="iconfont icon-qq"></i></a><a class="social-icon" href="https://space.bilibili.com/53836035" target="_blank" title="BiliBili"><i class="iconfont icon-bilibili-line"></i></a><a class="social-icon" href="mailto:zhang171346168@qq.com" target="_blank" title="Email"><i class="iconfont icon-email1"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="iconfont icon-rss"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/49971.html" title="Servlet基础-2">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/wallhaven-4d5ezg.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Servlet基础-2"></a></div><div class="recent-post-info"><a class="article-title" href="/49971.html" title="Servlet基础-2">Servlet基础-2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-23T02:14:12.000Z" title="发表于 2019-10-23 10:14:12">2019-10-23</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/49971.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/49971.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">Servlet的生命周期从第一次调用，到服务器关闭。期间如果删除加载好的servlet，依然能正常使用。因为，servlet已经加载到了tomcat服务器中。此时如果关闭掉服务器重启服务器，则不能使用删除掉的servelt，tomcat无法找到此servlet并将其加载到服务器中。
如果在web.xml 中配置了load-on-startup则是从服务器开启到服务器关闭(只是调用servlet的init()方法)。。


Servlet的方法
service()是真正处理请求的方法
init()是对Servlet进行初始化的一个方法，会在Servlet第一次加载进行存储时执行
destory()是在servlet被销毁时执行，也就服务器关闭时。

web.xml中servlet配置load-on-startup的作用在servlet的配置当中，1的含义是：标记容器是否在启动的时候就加载这个servlet。
当值为0或者大于0时，表示容器在应用启动时就加载这个servlet；
当是一个负数时或者没有指定时，则指示容器在该servlet被选择时才加载。（相当于没写，没使用load-on-s ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/49779.html" title="Servlet基础-1">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/博客封面14.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Servlet基础-1"></a></div><div class="recent-post-info"><a class="article-title" href="/49779.html" title="Servlet基础-1">Servlet基础-1</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-22T12:47:13.000Z" title="发表于 2019-10-22 20:47:13">2019-10-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/49779.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/49779.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">Servlet有什么用？
问题：服务器在接收到浏览器的请求后，会自动调用对应的逻辑代码进行请求 处理。但是逻辑代码是由程序员编写并放到服务器中，那么服务器怎么知道该怎么调用并调用哪个类和哪个方法来进行请求处理。
解决：程序员在编写代码的时候如果能够按照服务器能够识别的规则进行编写,浏览器按照指定的规则进行发送请求，那么服务器就可以调用并执行响应的逻辑 代码进行请求处理了。举个例子：图书馆借书 
实现： Servlet技术
Servlet概念
概念： 狭义的 Servlet 是指 Java 语言实现的一个接口，广义的 Servlet 是指 任何实现了这个 Servlet 接口的类，一般情况下，人们将 Servlet 理解为后者。 Servlet 运行于支持 Java 的应用服务器中。从原理上讲，Servlet 可以响应任何 类型的请求，但绝大多数情况下 Servlet 只用来扩展基于 HTTP 协议的Web服务器 
特点： 运行在支持java的应用服务器上 Servlet的实现遵循了服务器能够识别的规则，也就是服务器会自动的根据请求调用对应的servlet进行请求处理。简单方便，可移植性 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/55054.html" title="Tomcat服务器介绍和使用">     <img class="post_bg" data-lazy-src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1576860182435&amp;di=b5cb1c44fde8e8880533928608637a49&amp;imgtype=0&amp;src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2Fc5fbc5e04d4c1e537b6e2d94e85b21ae4d2de24b.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Tomcat服务器介绍和使用"></a></div><div class="recent-post-info"><a class="article-title" href="/55054.html" title="Tomcat服务器介绍和使用">Tomcat服务器介绍和使用</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-22T12:12:42.000Z" title="发表于 2019-10-22 20:12:42">2019-10-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/55054.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/55054.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">
服务器的概念和作用
问题： 学习了java编程之后，java代码的一个很重要的作用就是进行数据的 处理，但是目前来说我们运行编写的代码，只有一次性，也就是运行完毕后，如果需要再次运行则需要再次手动启动代码的执行。但是我们无法提前用户会何时 发送请求，也就无法决定我们编写的java代码应该什么时候启动运行。而且手动运行也变得不现实。
解决： 那么根据java的网络编内容，我们是不是可以使用代码编写一个容器 (对象) 呢？，该容器可以根据用户的请求来启动并运行我们编写的数据逻辑代码。答案是可以的。
实现：服务器
解释：所谓服务器其实就是代码编写的一个可以根据用户请求实时的调用执行对应的逻辑代码的一个容器。在普通用户看来就是一个安装程序。我们只需要将服务器在操作系统上进行安装，并将我们事先编写好的逻辑处理代码根据规则放到服务器的指定位置，启动服务器，那么服务器就自动的会根据接收到请求调用并执行对象的逻辑代码进行处理
Tomcat服务的下载和安装：
下载地址： https://tomcat.apache.org/download-70.cgi
下载选项
安装：下载成功后会为压缩包文件，解压即 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/30445.html" title="HTTP协议详解">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/博客封面4.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HTTP协议详解"></a></div><div class="recent-post-info"><a class="article-title" href="/30445.html" title="HTTP协议详解">HTTP协议详解</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-22T08:51:21.000Z" title="发表于 2019-10-22 16:51:21">2019-10-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/30445.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/30445.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">

互联网的发展非常迅速，但是万变不离其宗。学习web开发，需要我们对 互联的交互机制有一定的了解。为了更好的理解并掌握Servlet，在正式学习 Servlet之前需要对web开发中客户端和服务器的交互机制以及所涉及的规范 (HTTP)进行学习。
web交互的基本流程
客户端根据用户输入的地址信息请求服务器，服务器在接收到用户 的请求后进行处理，然后将处理结果响应给客户端，客户端将响应结果 展示给用户。 

专业术语: 
请求：客户端根据用户地址信息将数据发送给服务器的过程
响应：服务器将请求的处理结果发送给浏览器的过程


问题：
客户端也就是浏览器的版本是有很多的，服务器的版本也是有很多 的，如何实现不同版本的浏览器和不同版本的服务器之间的数据交互 呢？


解决：规范浏览器和服务器的数据交互的格式。
实现：HTTP协议HTTP的概念和介绍
概念：超文本传输协议（Hyper Text Transfer Protocol）
作用：规范了浏览器和服务器的数据交互
特点：
简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。每种方法规定 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/47587.html" title="EasyUI的使用">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/壁画.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="EasyUI的使用"></a></div><div class="recent-post-info"><a class="article-title" href="/47587.html" title="EasyUI的使用">EasyUI的使用</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-22T08:02:43.000Z" title="发表于 2019-10-22 16:02:43">2019-10-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/47587.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/47587.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">jQuery EasyUI是一组基于jQuery的UI插件集合体，而jQuery EasyUI的目标就是帮助web开发者更轻松的打造出功能丰富并且美观的UI界面。开发者不需要编写复杂的javascript，也不需要对css样式有深入的了解，开发者需要了解的只有一些简单的html标签。简而言之，EasyUI的使用通过查看api文档，想要的样式只需id名和class名一样就可以使用，通过 data-options选择你需要的属性即可。
EasyUI使用
1 将EasyUI提供的js文件和主题（themes）样式存放到项目的指定位置
2 在Html文档中引入EasyUI的插件,引用路径为相对路径
3在HTML文档标签上遵循EasyUI的文档规则使用EasyUI完成页面的开发    
面板使用(panel)：
创建面板：
在创建一个div标签，并class属性值为：”easyui-panel”


面板属性:
data-options：给面板添加常用的操作。具体参照API    
添加按钮
信息提示


注意：
EasyUI的使用
通过标签的class属性添加基本EasyUI功能，包括样式和j ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/14007.html" title="JQuery基础-6">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/博客封面4.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JQuery基础-6"></a></div><div class="recent-post-info"><a class="article-title" href="/14007.html" title="JQuery基础-6">JQuery基础-6</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-22T07:45:02.000Z" title="发表于 2019-10-22 15:45:02">2019-10-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/14007.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/14007.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">jQuery学习的内容
1、jQuery的封装原理（闭包，匿名自调用）
2、jQuery的选择器
3、jQuery操作元素的属性、内容、样式、文档结构
4、jQuery中的事件
5、jQuery中的动画
注意：一定不要二合一操作（原生js操作和JQuery混合使用）
前端
js、jQuery是动态的脚本语言，用来操作HTML的，让网页和用户之间互动
HTML用来格式化展示信息
CSS用来增加网页样式
都是由浏览器解析执行的


注意：
所有的网页都是存储在服务器端，运行在浏览器端。
所有的网页都是服务器实时的根据请求发送给浏览器执行的。
所有的网页数据可以实现动态的拼接。





JQuery操作checkbox
操作checkbox的选择状态使用prop()方法
prop(“checked”)—–返回选择的状态，选择返回true,未选返回false
prop(“checked”,true)—–置为选择状态
prop(“checked”,false)—–置为未选状态


使用each进行遍历
对象名.each(fn)—–在遍历的时候会给每个对象默认执行fn函数。this表示js对象
 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/14327.html" title="JQuery基础-5">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/images/20200701211402.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JQuery基础-5"></a></div><div class="recent-post-info"><a class="article-title" href="/14327.html" title="JQuery基础-5">JQuery基础-5</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-22T07:21:41.000Z" title="发表于 2019-10-22 15:21:41">2019-10-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/14327.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/14327.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">强大的JQuery已经帮我们封装好了方法，通过方法的调用就能实现不错的动画效果。详细方法介绍可以看JQuery的相关文档

1234567891011121314151617181920212223242526272829303132333435363738394041&lt;html&gt;	&lt;head&gt;		&lt;title&gt;动画效果&lt;/title&gt;		&lt;meta charset=&quot;UTF-8&quot;/&gt;		&lt;!--引入jQuery文件--&gt;		&lt;script src=&quot;js/jquery-1.9.1.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;		&lt;!--声明css代码域--&gt;		&lt;style type=&quot;text/css&quot;&gt;			#showdiv&#123;				height: 300px;				background-co ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/63286.html" title="JQuery基础-4">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/wallhaven-5wqmj8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JQuery基础-4"></a></div><div class="recent-post-info"><a class="article-title" href="/63286.html" title="JQuery基础-4">JQuery基础-4</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-22T07:01:04.000Z" title="发表于 2019-10-22 15:01:04">2019-10-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/63286.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/63286.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">JQuery动态操作事件
元素对象.bind(“事件名”,fn)—-动态的给指定的元素对象追加指定的事件及其监听的函数。
注意：js中的是一次添加，多次添加时覆盖的效果。jQuery是追加的效果，可以实现给一个事件添加不同的监听函数。


元素对象.unBind(“事件名”)—-移除指定的元素对象的指定事件
注意：js方式添加的事件不能移除。


元素对象.one(“事件名”,fn)—-给指定的元素对象添加一次性事件，事件被触发执行一次即失效。
注意：可以给事件添加多个一次函数，unBind可以用来解绑


页面载入事件
$(document).ready(function(){});
$(function(){});—-常用
window.onload = function () { }
页面载入成功后会调用传入的函数对象
注意：此方式可以给页面载入动态的增加多个函数对象，不会被覆盖。原生js载入事件多个函数对象会被覆盖
1234567891011121314151617181920212223242526272829303132333435363738394041424344454 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/13687.html" title="JQuery基础-3">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/博客封面12.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JQuery基础-3"></a></div><div class="recent-post-info"><a class="article-title" href="/13687.html" title="JQuery基础-3">JQuery基础-3</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-22T06:27:57.000Z" title="发表于 2019-10-22 14:27:57">2019-10-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/13687.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/13687.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">JQuery操作元素的样式
使用css()
对象名.css(“属性名”)—-返回当前属性的样式值
对象名.css(“属性名”,”属性值”)—-增加、修改元素的样式
对象名.css({“样式名”:”样式值”,”样式名”:”样式值”……})—-使用json传参，提升代码书写效率。
相当于原生js中的对象名.style.属性名


使用addClass()
对象名.addClass(“类选则器名”)—-追加一个类样式
对象名.removeClass(“类选择器 名”)—-删除一个指定的类样式
相当于原生js中的对象名.className
12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182&lt;html&gt;	&lt;head&gt;		&lt;title&gt;操作元素样式&lt;/title&gt;		&lt;meta chars ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/62902.html" title="JQuery基础-2">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img//img20200824152021.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JQuery基础-2"></a></div><div class="recent-post-info"><a class="article-title" href="/62902.html" title="JQuery基础-2">JQuery基础-2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-22T06:04:46.000Z" title="发表于 2019-10-22 14:04:46">2019-10-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/62902.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/62902.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">jQuery操作元素的属性
首先通过选择器获取到元素对象
获取
对象名.attr(“属性名”) —-返回当前属性值
注意此种方式不能获取value属性的实时数据，使用对象名.val()进行获取。
对象名.attr相当于原生的-元素对象名.getAttribute(“属性名”);获取的不是value属性的实时数据
val()方法返回获取匹配的元素集合中第一个元素的当前值。


修改
对象名.attr(“属性名”,”属性值”);
12345678910111213141516171819202122232425262728&lt;html&gt;	&lt;head&gt;		&lt;title&gt;jQuery操作元素的属性&lt;/title&gt;		&lt;meta charset=&quot;UTF-8&quot;/&gt;		&lt;script src=&quot;js/jquery-1.9.1.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;		&lt ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/28/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/28/#content-inner">28</a><span class="page-number current">29</span><a class="page-number" href="/page/30/#content-inner">30</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/#content-inner">35</a><a class="extend next" rel="next" href="/page/30/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="https://gitee.com/kylincw/images/raw/master/img/20200807181526.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/kylincw/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Kylin</div><div class="author-info__description">学习不易，努力努力~</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">349</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">423</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">96</div></a></div></div><a class="button--animated" id="card-info-btn"><i class="fas fa-bookmark"></i><span>加入书签</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/kylincw" target="_blank" title="Github"><i class="iconfont icon-github"></i></a><a class="social-icon" href="tencent://message/?Menu=yes&amp;uin=171346168&amp;Service=300&amp;sigT=45a1e5847943b64c6ff3990f8a9e644d2b31356cb0b4ac6b24663a3c8dd0f8aa12a595b1714f9d45" target="_blank" title="qq"><i class="iconfont icon-qq"></i></a><a class="social-icon" href="https://space.bilibili.com/53836035" target="_blank" title="BiliBili"><i class="iconfont icon-bilibili-line"></i></a><a class="social-icon" href="mailto:zhang171346168@qq.com" target="_blank" title="Email"><i class="iconfont icon-email1"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="iconfont icon-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">学习不易，努力努力！</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/25682.html" title="Dockerfile解析"><img data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/images/20200418114518.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Dockerfile解析"/></a><div class="content"><a class="title" href="/25682.html" title="Dockerfile解析">Dockerfile解析</a><time datetime="2022-01-29T10:03:35.460Z" title="更新于 2022-01-29 18:03:35">2022-01-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/44472.html" title="Docker容器数据卷"><img data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/code1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker容器数据卷"/></a><div class="content"><a class="title" href="/44472.html" title="Docker容器数据卷">Docker容器数据卷</a><time datetime="2022-01-29T09:53:54.797Z" title="更新于 2022-01-29 17:53:54">2022-01-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/41351.html" title="Docker镜像"><img data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/wallhaven-dgzqkl.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker镜像"/></a><div class="content"><a class="title" href="/41351.html" title="Docker镜像">Docker镜像</a><time datetime="2022-01-29T09:31:13.744Z" title="更新于 2022-01-29 17:31:13">2022-01-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/7569.html" title="Docker常用命令"><img data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/wallhaven-3kp6yv.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker常用命令"/></a><div class="content"><a class="title" href="/7569.html" title="Docker常用命令">Docker常用命令</a><time datetime="2022-01-29T09:15:36.534Z" title="更新于 2022-01-29 17:15:36">2022-01-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/40200.html" title="谷粒商城记录"><img data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/wallhaven-od5gj7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="谷粒商城记录"/></a><div class="content"><a class="title" href="/40200.html" title="谷粒商城记录">谷粒商城记录</a><time datetime="2022-01-04T08:20:38.327Z" title="更新于 2022-01-04 16:20:38">2022-01-04</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-bolt"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Elasticsearch/"><span class="card-category-list-name">Elasticsearch</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/English/"><span class="card-category-list-name">English</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item parent"><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">69</span><i class="fas fa-caret-left "></i></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/IO%E6%B5%81/"><span class="card-category-list-name">IO流</span><span class="card-category-list-count">10</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/JDBC/"><span class="card-category-list-name">JDBC</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/JUC/"><span class="card-category-list-name">JUC</span><span class="card-category-list-count">19</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/JVM/"><span class="card-category-list-name">JVM</span><span class="card-category-list-count">10</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/ajax/" style="font-size: 1.15em; color: rgb(144, 108, 70)">ajax</a><a href="/tags/SpringBoot/" style="font-size: 1.35em; color: rgb(124, 63, 164)">SpringBoot</a><a href="/tags/Docker/" style="font-size: 1.25em; color: rgb(19, 200, 59)">Docker</a><a href="/tags/Dockerfile/" style="font-size: 1.15em; color: rgb(191, 185, 137)">Dockerfile</a><a href="/tags/%E5%AE%89%E8%A3%85/" style="font-size: 1.15em; color: rgb(31, 142, 25)">安装</a><a href="/tags/%E5%8D%B8%E8%BD%BD/" style="font-size: 1.15em; color: rgb(139, 130, 12)">卸载</a><a href="/tags/Docker%E7%9A%84%E4%BD%BF%E7%94%A8/" style="font-size: 1.15em; color: rgb(193, 3, 27)">Docker的使用</a><a href="/tags/ES6/" style="font-size: 1.15em; color: rgb(121, 185, 110)">ES6</a><a href="/tags/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0/" style="font-size: 1.15em; color: rgb(44, 114, 87)">箭头函数</a><a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 1.45em; color: rgb(27, 112, 38)">基础</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">2022年01月</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">2021年12月</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/11/"><span class="card-archive-list-date">2021年11月</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">2021年06月</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/05/"><span class="card-archive-list-date">2021年05月</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/03/"><span class="card-archive-list-date">2021年03月</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/12/"><span class="card-archive-list-date">2020年12月</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/11/"><span class="card-archive-list-date">2020年11月</span><span class="card-archive-list-count">33</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">349</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2019-08-01T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">513.4k</div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-01-29T11:26:05.720Z"></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/kylincw/img//img20201017211426.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2022 By Kylin</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  function loadValine () {
    function initValine () {
      let initData = {
        el: '#vcomment',
        appId: 'ClIyIUhj1ue2rcRTsApYCR50-gzGzoHsz',
        appKey: 'ATug9IScYQBHILhKWEqBHYxM',
      }
      
      const valine = new Valine(initData)
    }

    if (typeof Valine === 'function') initValine() 
    else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
  }

  window.pjax ? loadValine() : window.addEventListener('load', loadValine)
})()</script><script>function subtitleType () {
  getScript('https://sdk.jinrishici.com/v2/browser/jinrishici.js').then(() => {
    jinrishici.load(function (result) {
      if (true) {
        var sub = "今日事&#44;今日畢,Never put off till tomorrow what you can do today".length == 0 ? new Array() : "今日事&#44;今日畢,Never put off till tomorrow what you can do today".split(',')
        var content = result.data.content
        var both = sub.unshift(content)
        var typed = new Typed('#subtitle', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('subtitle').innerHTML = result.data.content
      }
    })
  })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.17.0/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    let defaultIcon = '?d=robohash'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const serverURL = 'https://cliyiuhj.lc-cn-n1-shared.com'

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": 'ClIyIUhj1ue2rcRTsApYCR50-gzGzoHsz',
        "X-LC-Key": 'ATug9IScYQBHILhKWEqBHYxM',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': getIcon(e.QQAvatar, e.mail),
            'content': changeContent(e.comment),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('valine-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('valine-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script></div></body></html>