<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Kylin</title><meta name="keywords" content="学习，博客，技术交流，学习记录，Kylin，kylin"><meta name="author" content="Kylin"><meta name="copyright" content="Kylin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="学习不易，努力努力~">
<meta property="og:type" content="website">
<meta property="og:title" content="Kylin">
<meta property="og:url" content="https://www.codekylin.cn/page/28/index.html">
<meta property="og:site_name" content="Kylin">
<meta property="og:description" content="学习不易，努力努力~">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/kylincw/images/raw/master/img/20200807181526.jpg">
<meta property="article:author" content="Kylin">
<meta property="article:tag" content="学习，博客，技术交流，学习记录，Kylin，kylin">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/kylincw/images/raw/master/img/20200807181526.jpg"><link rel="shortcut icon" href="https://gitee.com/kylincw/images/raw/master/img/20200807181548.png"><link rel="canonical" href="https://www.codekylin.cn/page/28/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><meta name="google-site-verification" content="gzeyWstt6NoTZKh7YFYNLNziL8HIZ8YH2Ug7xTDX5-Y"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?f76c34daefe747deee7c7be3ead2ba80";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-159334016-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-159334016-1');
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":90,"position":"top","messagePrev":"自上次更新以来已经","messageNext":"天，文章的内容可能已过时或存在差异。"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50000,"languages":{"author":"作者: Kylin","link":"链接: ","source":"来源: Kylin","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#FF0000","bgDark":"#2d3035","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-01-30 10:37:34'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kylincw/img/img/custom.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1993646_z05rabxf05h.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kylincw/img/img/icon.css"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Kylin" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="https://gitee.com/kylincw/images/raw/master/img/20200807181526.jpg" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/kylincw/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">354</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">425</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">99</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/kylincw/img//img20201017211426.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Kylin</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Kylin</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/kylincw" target="_blank" title="Github"><i class="iconfont icon-github"></i></a><a class="social-icon" href="tencent://message/?Menu=yes&amp;uin=171346168&amp;Service=300&amp;sigT=45a1e5847943b64c6ff3990f8a9e644d2b31356cb0b4ac6b24663a3c8dd0f8aa12a595b1714f9d45" target="_blank" title="qq"><i class="iconfont icon-qq"></i></a><a class="social-icon" href="https://space.bilibili.com/53836035" target="_blank" title="BiliBili"><i class="iconfont icon-bilibili-line"></i></a><a class="social-icon" href="mailto:zhang171346168@qq.com" target="_blank" title="Email"><i class="iconfont icon-email1"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="iconfont icon-rss"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/35087.html" title="MyBatis学习-2">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/博客封面9.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MyBatis学习-2"></a></div><div class="recent-post-info"><a class="article-title" href="/35087.html" title="MyBatis学习-2">MyBatis学习-2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-27T03:42:39.000Z" title="发表于 2019-10-27 11:42:39">2019-10-27</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SSM/">SSM</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/SSM/MyBatis/">MyBatis</a></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/35087.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/35087.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">三种查询方式
.selectList() 返回值为 List&lt;resultType 属性控制&gt; 适用于查询结果都需要遍历的需求 

 

.selectOne() 返回值 Object,适用于返回结果只是变量或一行数据时 

 

.selectMap() 返回值 Map 适用于需要在查询结果中通过某列的值取到这行数据的需求. Map&lt;key,resultType 控制&gt;
 



settings标签
在mybatis全局配置文件中通过settings标签控制 mybatis 全局开关
在mybatis.xml（mybatis配置文件)中开启log4j
必须保证有 log4j.jar
在 src 下有 log4j.properties123&lt;settings&gt;&lt;setting name=&quot;logImpl&quot; value=&quot;LOG4J&quot;/&gt; &lt;/settings&gt;



注意再mybais.xml中的标签顺序
parameterType 属性在XXXMapper.xml中&lt;-sele ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/34895.html" title="MyBatis学习-1">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/wallhaven-yjy95k.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MyBatis学习-1"></a></div><div class="recent-post-info"><a class="article-title" href="/34895.html" title="MyBatis学习-1">MyBatis学习-1</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-27T01:49:51.000Z" title="发表于 2019-10-27 09:49:51">2019-10-27</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SSM/">SSM</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/SSM/MyBatis/">MyBatis</a></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/34895.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/34895.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">
MyBatis 简介MyBatis 本是apache的一个开源项目iBatis, 2010年这个项目由apache software foundation 迁移到了google code，并且改名为MyBatis 。2013年11月迁移到Github。
iBATIS一词来源于“internet”和“abatis”的组合，是一个基于Java的持久层框架。iBATIS提供的持久层框架包括SQL Maps和Data Access Objects（DAOs）
作用: 数据访问层框架. 底层是对 JDBC 的封装.
优点之一:使用mybatis时不需要编写实现类,只需要写需要执行的sql命令


MyBatis环境搭建和使用1.导入 jar
2.在src下新建全局配置文件

没有名称和地址要求
在全局配置文件中引入 DTD 或 schema
如果导入dtd后没有提示，可以采用使用本地dtd1234567891011121314151617181920212223&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;&l ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/4762.html" title="MVC开发模式和命名规范">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/images/20200701211317.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MVC开发模式和命名规范"></a></div><div class="recent-post-info"><a class="article-title" href="/4762.html" title="MVC开发模式和命名规范">MVC开发模式和命名规范</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-27T01:32:07.000Z" title="发表于 2019-10-27 09:32:07">2019-10-27</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/4762.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/4762.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">MVC开发模式MVC全名是Model View Controller，是模型(model)－视图(view)－控制器(controller)的缩写，一种软件设计典范，用一种业务逻辑、数据、界面显示分离的方法组织代码，将业务逻辑聚集到一个部件里面，在改进和个性化定制界面及用户交互的同时，不需要重新编写业务逻辑。MVC被独特的发展起来用于映射传统的输入、处理和输出功能在一个逻辑的图形化用户界面的结构中。

M:Model 模型,实体类和业务和 dao
V:view 视图,JSP
C:Controller 控制器,servlet
作用:视图和逻辑分离

MVC 适用场景:大型项目开发.


开发步骤
设计数据库
实体类
持久层（dao）
业务逻辑
控制器
**视图



命名规范1.项目名:没有要求,不起中文
2.包:公司域名倒写 com.bjsxt
3.数据访问层:dao,persist,mapper
4.实体:entity,model,bean,javabean,pojo
5.业务逻辑:service,biz
6.控制器:controller,servlet,action,web
7.过 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/8602.html" title="Servlet的过滤器和监听器">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/wallhaven-5wqmj8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Servlet的过滤器和监听器"></a></div><div class="recent-post-info"><a class="article-title" href="/8602.html" title="Servlet的过滤器和监听器">Servlet的过滤器和监听器</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-26T06:33:11.000Z" title="发表于 2019-10-26 14:33:11">2019-10-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/8602.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/8602.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">过滤器问题：Servlet 的作用是针对浏览器发起的请求，进行请求的 处理。通过 Servlet 技术我们可以灵活的进行请求的处理，但是我们不但要对请求记性处理，我们还需对服务器的资源进行统一的管理 ，比如请求编码格式的统一设置，资源的统一分配等等，这个时候该怎么办呢？
解决：使用过滤器。
作用：对服务器资源进行管理 保护 servlet

过滤器的使用
创建一个实现了Filter接口的普通java类

覆写接口的方法

init方法:服务器启动即执行。资源初始化
doFilter方法:拦截请求的方法，在此方法中可以对资源实现管理。
destory方法：服务器关闭执行。
注意：需要手动对请求进行放行。chain.doFilter(request, response);


在web.xml中配置过滤器
12345678&lt;filter&gt;	&lt;filter-name&gt;myFilter&lt;/filter-name&gt;	&lt;filter-class&gt;com.bjsxt.filter.MyFilter&lt;/filter-class&gt;&lt;/fi ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2172.html" title="Jstl标签库">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/wallhaven-yjy95k.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Jstl标签库"></a></div><div class="recent-post-info"><a class="article-title" href="/2172.html" title="Jstl标签库">Jstl标签库</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-26T02:57:40.000Z" title="发表于 2019-10-26 10:57:40">2019-10-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/2172.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/2172.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">JSTL标签库什么是JSTL标签库 JSTL是apache对EL表达式的扩展（也就是说JSTL依赖EL）， JSTL是标签语言！JSTL标签使用以来非常方便，它与JSP动作 标签一样，只不过它不是JSP内置的标签，需要我们自己导包，以 及指定标签库而已！
如果你使用MyEclipse开发JavaWeb，那么在把项目发布 到Tomcat时，你会发现，MyEclipse会在lib目录下存放jstl的 Jar包！如果你没有使用MyEclipse开发那么需要自己来导入这个 JSTL的Jar包：jstl-1.2.jar。 
JSTL标签库的作用 用来提升在JSP页面的逻辑代码的编码效率，使用标签来替换逻辑代码的直接书写，高效，美观，整洁，易读

Jstl标签库的使用
核心标签库

1.导入jar包

2.声明jstl标签库的引入(核心标签库)

&lt;%@taglib prefix=”c” uri=”http://java.sun.com/jsp/jstl/core&quot; %&gt;


基本标签：

&lt;-c:out value=”数据” default=”默认值”&gt;&lt; ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/32496.html" title="El表达式">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/博客封面10.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="El表达式"></a></div><div class="recent-post-info"><a class="article-title" href="/32496.html" title="El表达式">El表达式</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-26T02:24:37.000Z" title="发表于 2019-10-26 10:24:37">2019-10-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/32496.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/32496.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">El表达式
传统方式获取作用域数据
缺点一:导入包
缺点二:需要强转
缺点三:获取数据的代码过于麻烦。



什么是EL表达式 全称：Expression Language，一种写法非常简介的表达式。语法 简单易懂，便于使用。表达式语言的灵感来自于 ECMAScript 和 XPath 表达式语言
EL表达式的作用 让jsp书写起来更加的方便。简化在jsp中获取作用域或者请 求数据的写法。也会搭配Jstl来进行使用。


El表达式的使用
语法结构：${expression},提供.和[ ]两种运算符来存取数据。
使用EL表达式获取请求数据
请求头数据：
${header}–&gt;返回所有的请求头数据
${header[“键名”]}—&gt;返回指定的键名的请求头数据
${hedaerValues[“键名”]}—&gt;返回指定的键名(同键不同值)的值的数组。


获取用户请求数据
获取请求数据
request对象存储了请求数据—&gt;${param.键名}           返回值
request对象存储了请求数据—&gt;${paramvalues.键名}     返回的是数 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/59920.html" title="Ajax学习">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/wallhaven-76qvyy.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Ajax学习"></a></div><div class="recent-post-info"><a class="article-title" href="/59920.html" title="Ajax学习">Ajax学习</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-26T01:47:40.000Z" title="发表于 2019-10-26 09:47:40">2019-10-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/59920.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/59920.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">Ajax概念问题：目前来，所有的请求的发送都是通过浏览器自己直接进行发送，响应是浏览器在接收到响应信息后自主的将响应数据覆盖当前页面显示。现在，要求在保留原有页面内容的情况下显示新的响应内容.
解决:使用ajax技术
ajax原理:请求由ajax引擎对象发送，响应数据，浏览器不会直接进行处理，而是流转给发请求的ajax引擎对象。这样我们可以通过操作ajax引擎对象变相的实现在页面中显示新的响应资源。
本质：js的DOM操作中的数据由程序员自己写死声明，变成从服务器动态的获取。

Ajax使用
创建ajax引擎对象
覆写onreadystatechange函数
判断数据状态码(ajax.readyState)
判断响应状态码(ajax.status)
获取响应数据
处理响应数据(js的DOM操作)


创建并发送请求
ajax.open(method,url,async)
ajax.send(“请求数据”)
解释
method：表示请求的方式，值为get/post
url:表示请求地址，一般为要请求的servlet的别名。
async:表示异步还是同步请求， true表示异步， fals ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/62960.html" title="JSP学习">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/博客封面12.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JSP学习"></a></div><div class="recent-post-info"><a class="article-title" href="/62960.html" title="JSP学习">JSP学习</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-25T14:07:29.000Z" title="发表于 2019-10-25 22:07:29">2019-10-25</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/62960.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/62960.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">JSP 学习问题：在学习了 Servlet 之后，使用 Servlet 进行页面的展现，代码书写过于麻烦。极大的影响了开发的效率，那么有没有一种方式可以让我们像以前写网页一样来进行网页的编程工作呢?
解决：使用 JSP 技术
概念：JSP 全名为 JavaServerPages，中文名叫 java 服务器页面，其根本是一个简化的 Servlet 设计，它是由 SunMicrosystems 公司倡导、许多公司参与一起建立的一种动态网页技术标准。

特点  
本质上还是 Servlet
跨平台，一次编写处处运行
组件跨平台
健壮性和安全性



Jsp 的访问原理： 浏览器发起请求，请求 JSP，请求被 Tomcat 服务器接收，执行JspServlet 将请求的 JSP 文件转义成为对应的 java 文件(也是Servlet)，然后执行转义好的 java 文件。


Jsp的三种注释前端语言注释：会被转译，也会被发送，但是不会被浏览器执行
java语言注释：会被转译，但是不会被servlet执行
Jsp注释：不会被转译。
Jsp的page指令学习
&lt;%@page 属性名=”属性值 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/62927.html" title="web.xml和Tomcat下的server.xml学习">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/wallhaven-4do8mo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="web.xml和Tomcat下的server.xml学习"></a></div><div class="recent-post-info"><a class="article-title" href="/62927.html" title="web.xml和Tomcat下的server.xml学习">web.xml和Tomcat下的server.xml学习</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-25T13:44:47.000Z" title="发表于 2019-10-25 21:44:47">2019-10-25</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/62927.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/62927.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">Web.xml文件使用总结作用：存储项目相关的配置信息，保护 Servlet。解耦一些数据对程序的依赖。
使用位置：每个 Web 项目中
Tomcat 服务器中(在服务器目录 conf 目录中)

区别：
Web 项目下的 web.xml 文件为局部配置，针对本项目的位置。
Tomcat 下的 web.xml 文件为全局配置，配置公共信息。
如果单个servlet的web.xml没有配置相关信息，则按Tomcat下的web.xml使用


内容(核心组件)：
全局上下文配置(全局配置参数)
Servlet 配置
过滤器配置
监听器配置



加载顺序：Web 容器会按 ServletContext -&gt; context-param -&gt; listener -&gt;filter-&gt; servlet 这个顺序加载组件，这些元素可配置在 web.xml文件中的任意位置。
加载时机：服务器启动时
server.xml 文件问题：浏览器发起请求后，服务器根据请求在 webapps 目下调用对应的 Servlet 进行请求处理。那么为什么是 webapps 目录难道不能是其他的 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/50355.html" title="Servlet基础-8">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/images/20200718200129.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Servlet基础-8"></a></div><div class="recent-post-info"><a class="article-title" href="/50355.html" title="Servlet基础-8">Servlet基础-8</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-25T13:04:14.000Z" title="发表于 2019-10-25 21:04:14">2019-10-25</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/50355.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/50355.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">ServletContext 对象问题:Request 解决了一次请求内的数据共享问题，session 解决了用户不同请求的数据共享问题，那么不同的用户的数据共享该怎么办呢？
解决：使用 ServletContext 对象
作用：解决了不同用户的数据共享问题
原理：ServletContext 对象由服务器进行创建，一个项目只有一个对象。不管在项目的任意位置进行获取得到的都是同一个对象，那么不同用户发起的请求获取到的也就是同一个对象了，该对象由用户共同拥有。



特点
服务器进行创建
用户共享
一个项目只有一个



生命周期：服务器启动到服务器关闭
作用域：项目内

使用
获取ServletContext对象
第一种方式：ServletContext sc=this.getServletContext();
第二种方式：ServletContext sc2=this.getServletConfig().getServletContext();
第三种方式：ServletContext sc3=req.getSession().getServletContext();


使用Se ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/27/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/27/#content-inner">27</a><span class="page-number current">28</span><a class="page-number" href="/page/29/#content-inner">29</a><span class="space">&hellip;</span><a class="page-number" href="/page/36/#content-inner">36</a><a class="extend next" rel="next" href="/page/29/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="https://gitee.com/kylincw/images/raw/master/img/20200807181526.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/kylincw/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Kylin</div><div class="author-info__description">学习不易，努力努力~</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">354</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">425</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">99</div></a></div></div><a class="button--animated" id="card-info-btn"><i class="fas fa-bookmark"></i><span>加入书签</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/kylincw" target="_blank" title="Github"><i class="iconfont icon-github"></i></a><a class="social-icon" href="tencent://message/?Menu=yes&amp;uin=171346168&amp;Service=300&amp;sigT=45a1e5847943b64c6ff3990f8a9e644d2b31356cb0b4ac6b24663a3c8dd0f8aa12a595b1714f9d45" target="_blank" title="qq"><i class="iconfont icon-qq"></i></a><a class="social-icon" href="https://space.bilibili.com/53836035" target="_blank" title="BiliBili"><i class="iconfont icon-bilibili-line"></i></a><a class="social-icon" href="mailto:zhang171346168@qq.com" target="_blank" title="Email"><i class="iconfont icon-email1"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="iconfont icon-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">学习不易，努力努力！</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/47602.html" title="超详细的Vagrant上手指南"><img data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/images/20200505210116.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="超详细的Vagrant上手指南"/></a><div class="content"><a class="title" href="/47602.html" title="超详细的Vagrant上手指南">超详细的Vagrant上手指南</a><time datetime="2022-01-30T02:36:44.871Z" title="更新于 2022-01-30 10:36:44">2022-01-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/25682.html" title="Dockerfile解析"><img data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/博客封面18.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Dockerfile解析"/></a><div class="content"><a class="title" href="/25682.html" title="Dockerfile解析">Dockerfile解析</a><time datetime="2022-01-29T12:07:22.928Z" title="更新于 2022-01-29 20:07:22">2022-01-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/7991.html" title="Docker-compose容器编排"><img data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/wallhaven-5wqmj8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker-compose容器编排"/></a><div class="content"><a class="title" href="/7991.html" title="Docker-compose容器编排">Docker-compose容器编排</a><time datetime="2022-01-29T12:05:44.932Z" title="更新于 2022-01-29 20:05:44">2022-01-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/41839.html" title="Docker轻量级可视化工具Portainer"><img data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/博客封面6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker轻量级可视化工具Portainer"/></a><div class="content"><a class="title" href="/41839.html" title="Docker轻量级可视化工具Portainer">Docker轻量级可视化工具Portainer</a><time datetime="2022-01-29T12:05:44.930Z" title="更新于 2022-01-29 20:05:44">2022-01-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/59415.html" title="Docker网络"><img data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/wallhaven-0pvrpm.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker网络"/></a><div class="content"><a class="title" href="/59415.html" title="Docker网络">Docker网络</a><time datetime="2022-01-29T12:05:44.928Z" title="更新于 2022-01-29 20:05:44">2022-01-29</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-bolt"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item parent"><a class="card-category-list-link" href="/categories/Docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">8</span><i class="fas fa-caret-left "></i></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Docker/CIG/"><span class="card-category-list-name">CIG</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Docker/compose/"><span class="card-category-list-name">compose</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Elasticsearch/"><span class="card-category-list-name">Elasticsearch</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/English/"><span class="card-category-list-name">English</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item parent"><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">69</span><i class="fas fa-caret-left "></i></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/IO%E6%B5%81/"><span class="card-category-list-name">IO流</span><span class="card-category-list-count">10</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/JDBC/"><span class="card-category-list-name">JDBC</span><span class="card-category-list-count">5</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/ajax/" style="font-size: 1.15em; color: rgb(2, 89, 39)">ajax</a><a href="/tags/SpringBoot/" style="font-size: 1.45em; color: rgb(200, 145, 88)">SpringBoot</a><a href="/tags/Docker/" style="font-size: 1.3em; color: rgb(83, 75, 183)">Docker</a><a href="/tags/Dockerfile/" style="font-size: 1.15em; color: rgb(171, 178, 91)">Dockerfile</a><a href="/tags/%E5%AE%89%E8%A3%85/" style="font-size: 1.15em; color: rgb(165, 176, 14)">安装</a><a href="/tags/%E5%8D%B8%E8%BD%BD/" style="font-size: 1.15em; color: rgb(148, 162, 138)">卸载</a><a href="/tags/Docker%E7%9A%84%E4%BD%BF%E7%94%A8/" style="font-size: 1.15em; color: rgb(40, 44, 58)">Docker的使用</a><a href="/tags/Portainer/" style="font-size: 1.15em; color: rgb(125, 78, 97)">Portainer</a><a href="/tags/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0/" style="font-size: 1.15em; color: rgb(179, 81, 114)">箭头函数</a><a href="/tags/ES6/" style="font-size: 1.15em; color: rgb(180, 55, 85)">ES6</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">2022年01月</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">2021年12月</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/11/"><span class="card-archive-list-date">2021年11月</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">2021年06月</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/05/"><span class="card-archive-list-date">2021年05月</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/03/"><span class="card-archive-list-date">2021年03月</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/12/"><span class="card-archive-list-date">2020年12月</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/11/"><span class="card-archive-list-date">2020年11月</span><span class="card-archive-list-count">33</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">354</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2019-08-01T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">530.1k</div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-01-30T02:37:32.512Z"></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/kylincw/img//img20201017211426.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2022 By Kylin</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  function loadValine () {
    function initValine () {
      let initData = {
        el: '#vcomment',
        appId: 'ClIyIUhj1ue2rcRTsApYCR50-gzGzoHsz',
        appKey: 'ATug9IScYQBHILhKWEqBHYxM',
      }
      
      const valine = new Valine(initData)
    }

    if (typeof Valine === 'function') initValine() 
    else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
  }

  window.pjax ? loadValine() : window.addEventListener('load', loadValine)
})()</script><script>function subtitleType () {
  getScript('https://sdk.jinrishici.com/v2/browser/jinrishici.js').then(() => {
    jinrishici.load(function (result) {
      if (true) {
        var sub = "今日事&#44;今日畢,Never put off till tomorrow what you can do today".length == 0 ? new Array() : "今日事&#44;今日畢,Never put off till tomorrow what you can do today".split(',')
        var content = result.data.content
        var both = sub.unshift(content)
        var typed = new Typed('#subtitle', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('subtitle').innerHTML = result.data.content
      }
    })
  })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.17.0/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    let defaultIcon = '?d=robohash'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const serverURL = 'https://cliyiuhj.lc-cn-n1-shared.com'

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": 'ClIyIUhj1ue2rcRTsApYCR50-gzGzoHsz',
        "X-LC-Key": 'ATug9IScYQBHILhKWEqBHYxM',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': getIcon(e.QQAvatar, e.mail),
            'content': changeContent(e.comment),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('valine-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('valine-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script></div></body></html>