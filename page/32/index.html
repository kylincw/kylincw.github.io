<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Kylin</title><meta name="keywords" content="学习，博客，技术交流，学习记录，Kylin，kylin"><meta name="author" content="Kylin"><meta name="copyright" content="Kylin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="学习不易，努力努力~">
<meta property="og:type" content="website">
<meta property="og:title" content="Kylin">
<meta property="og:url" content="https://www.kylin.show/page/32/index.html">
<meta property="og:site_name" content="Kylin">
<meta property="og:description" content="学习不易，努力努力~">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/kylincw/images/raw/master/img/20200807181526.jpg">
<meta property="article:author" content="Kylin">
<meta property="article:tag" content="学习，博客，技术交流，学习记录，Kylin，kylin">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/kylincw/images/raw/master/img/20200807181526.jpg"><link rel="shortcut icon" href="https://gitee.com/kylincw/images/raw/master/img/20200807181548.png"><link rel="canonical" href="https://www.kylin.show/page/32/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><meta name="google-site-verification" content="gzeyWstt6NoTZKh7YFYNLNziL8HIZ8YH2Ug7xTDX5-Y"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?f76c34daefe747deee7c7be3ead2ba80";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-159334016-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-159334016-1');
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":90,"position":"top","messagePrev":"自上次更新以来已经","messageNext":"天，文章的内容可能已过时或存在差异。"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50000,"languages":{"author":"作者: Kylin","link":"链接: ","source":"来源: Kylin","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#FF0000","bgDark":"#2d3035","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-06-23 22:01:14'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kylincw/img/img/custom.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1993646_z05rabxf05h.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kylincw/img/img/icon.css"><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Kylin" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="https://gitee.com/kylincw/images/raw/master/img/20200807181526.jpg" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/kylincw/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">336</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">414</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">93</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/kylincw/img//img20201017211426.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Kylin</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Kylin</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/kylincw" target="_blank" title="Github"><i class="iconfont icon-github"></i></a><a class="social-icon" href="tencent://message/?Menu=yes&amp;uin=171346168&amp;Service=300&amp;sigT=45a1e5847943b64c6ff3990f8a9e644d2b31356cb0b4ac6b24663a3c8dd0f8aa12a595b1714f9d45" target="_blank" title="qq"><i class="iconfont icon-qq"></i></a><a class="social-icon" href="https://space.bilibili.com/53836035" target="_blank" title="BiliBili"><i class="iconfont icon-bilibili-line"></i></a><a class="social-icon" href="mailto:zhang171346168@qq.com" target="_blank" title="Email"><i class="iconfont icon-email1"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="iconfont icon-rss"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/60597.html" title="JDBC操作学习-3">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/images/20200423185712.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JDBC操作学习-3"></a></div><div class="recent-post-info"><a class="article-title" href="/60597.html" title="JDBC操作学习-3">JDBC操作学习-3</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-09-28T04:51:42.000Z" title="发表于 2019-09-28 12:51:42">2019-09-28</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Java/JDBC/">JDBC</a></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/60597.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/60597.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">JDBC事务管理事务:一个事件的完成需要几个子操作的联合完成,只要有一个子操作执行失败,则数据回滚到原始状态,都成功则提交数据.


转账业务

张三给李四转账1000元.

注意:JDBC中的事务是自动提交的.

问题:如果在业务的处理过程中,某条Sql语句执行失败,但是数据已经被更改了.

解决:设置JDBC的事务为手动提交.sql语句都执行成功后再统一提交,只要有失败的就回滚.

使用:conn.setAutoCommit(false)//设置为手动提交

使用try catch进行SQL命令执行的异常处理

try中是使用conn.commit() 提交数据
catch中使用conn.rollback()回滚数据





123456789101112131415161718192021222324252627public class TestTran &#123;	public static void main(String[] args) throws ClassNotFoundException, SQLException &#123;		//加载驱动			Class. ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/11380.html" title="JDBC操作学习-2">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/wallhaven-od5gj7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JDBC操作学习-2"></a></div><div class="recent-post-info"><a class="article-title" href="/11380.html" title="JDBC操作学习-2">JDBC操作学习-2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-09-28T02:54:59.000Z" title="发表于 2019-09-28 10:54:59">2019-09-28</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Java/JDBC/">JDBC</a></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/11380.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/11380.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">JDBC的基本使用流程:
1 导入jar包:
oracle安装路径\app\oracle\product\11.2.0\server\jdbc\lib
导入ojdbc6.jar,在项目上右键 builder path–&gt;add to builder path.


2 加载驱动 
Class.forName(“oracle.jdbc.driver.OracleDriver”);
作用:初始化加载jdbc类到java虚拟机.
注意:ojdbc6.jar使用此包该句可以省略不写.        


3 获取数据库连接对象
Connection conn =DriverMananger.getConnection(“url”,”username”,”password”);
参数含义:
url:表示要连接的数据地址
username:数据库的用户名
password:数据库的密码


作用:
连接到指定的数据库并返回连接对象.




4 创建sql命令对象
Statement stmt=conn.createStatement();
作用:
编译,发送SQL命令




5 创建sq ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/11572.html" title="JDBC操作学习-1">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/wallhaven-yjy95k.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JDBC操作学习-1"></a></div><div class="recent-post-info"><a class="article-title" href="/11572.html" title="JDBC操作学习-1">JDBC操作学习-1</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-09-28T02:28:07.000Z" title="发表于 2019-09-28 10:28:07">2019-09-28</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Java/JDBC/">JDBC</a></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/11572.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/11572.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">JAVA的数据获取方式:
直接声明变量并赋值.
Scanner类控制台输入
IO流(将硬盘存储中的数据读取到java中)
scoket+io
从数据库中获取
JDBC的概念:
问题:
java和数据库之间的沟通不一致    


解决:
数据库厂商对外提供java支持的接口


使用:
创建类实现接口(操作数据库)
数据库厂商对外提供了数据库操作的驱动包.(翻译官)


结论:
JDBC其实就是数据厂商对外提供的能够对自己的数据进行操作的驱动包也就是jar文件.


JDBC的使用:
jdbc完成新增
jdbc完成修改
jdbc完成删除
jdbc的事务
jdbc完成查询
jdbc的MVC思想



</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/35176.html" title="MySQL数据库-2">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/deepin-4.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL数据库-2"></a></div><div class="recent-post-info"><a class="article-title" href="/35176.html" title="MySQL数据库-2">MySQL数据库-2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-09-28T02:06:20.000Z" title="发表于 2019-09-28 10:06:20">2019-09-28</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/35176.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/35176.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">数据类型
数值类型
整数类型
smallint, 2 字节
int, 4 字节
Integer, int 的同义词
bigint, 8 字节


浮点数
float, 4 字节
double, 8 字节




字符类型
char, 不可变长度
varchar, 可变长度
等同于oracle中的char与varchar2区别
char的存储效率高于varchar(varchar2)
char是开辟指定大小的内存空间，varchar(varchar2)是根据数据大小来开辟空间的大小


日期时间类型
date, yyyy-mm-dd（同oracle书写格式不一样）
datetime, yyyy-mm-dd hh:mi:ss
time, hh:mi:ss
timestamp, 更精确的时间
year, yyyy


其他类型
blob, 存放二进制文件
text, 存放大量文本信息



SQL语句上的区别
关于delete
Oracle 中的语法是 delete [from], from 可以省略, 但是MySQL 中, 不能省略 from


关于外连接
MySQL 中不能使用(+)符 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/34856.html" title="MySQL数据库-1">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/荒鲸.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL数据库-1"></a></div><div class="recent-post-info"><a class="article-title" href="/34856.html" title="MySQL数据库-1">MySQL数据库-1</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-09-28T01:50:48.000Z" title="发表于 2019-09-28 09:50:48">2019-09-28</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/34856.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/34856.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">MySQl数据库简介
MySQL是一种关系数据库管理系统，是一种开源软件
由瑞典MySQL AB公司开发，2008年1月16号被Sun公司收购。2009年，SUN又被Oracle收购
MySQL软件采用双授权政策，分为社区版和商业版。由于体积小、速度快、总体拥有成本低，尤其是开放源码特点，一般中小型网站的开发都选择MySQL作为网站数据库。
由于其社区版的性能卓越，搭配PHP和Apache可组成良好的开发环境。
MySQL能够工作在众多不同的平台上
端口：3306
默认用户：root
字符集：默认字符集latin1，应设置为gbk或utf-8
安装时可以启动远程登录、创建匿名账户 可安装图形化操作界面，方便操作

MySQL常用命令
连接MySQL
mysql -u root -p


查看当前所有数据库
show databases;


创建数据库
create database 数据库名;


使用（切换）数据库
user 数据库名;


查看当前数据库的所有表格
show tables;


退出
exit;



</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/50870.html" title="Oracle数据库基础知识-12">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/wallhaven-r2x6lw.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Oracle数据库基础知识-12"></a></div><div class="recent-post-info"><a class="article-title" href="/50870.html" title="Oracle数据库基础知识-12">Oracle数据库基础知识-12</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-09-27T05:16:52.000Z" title="发表于 2019-09-27 13:16:52">2019-09-27</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/50870.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/50870.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">分页查询-rownum当一个表中的数据量特别大的时候，如果一次性全部显示给用户，则造成页面过于庞大，体验极差。使用分页查询可以大大改善

rownum关键字：oracle对外提供的自动给查询结果编号的关键字，与每行的数据没有关系。
注意：rownum关键字只能做&lt; &lt;=的判断，不能进行&gt; &gt;=的判断
实例
查询员工信息的前5条数据 第一页数据
select rownum r,e.* from emp e where rownum &lt;=5;
select * from (select rownum r,e.* from emp e where rownum &lt;=5) t where r&gt;0;
查询员工信息的6-10条数据 第二页数据
select rownum,t.* from (select rownum r,e.* from emp e where rownum &lt;=10) t where r&gt;5;
查询员工信息的11-15条数据 第三页数据
select * from (select rownum r,e. * from emp ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/51190.html" title="Oracle数据库基础知识-11">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/博客封面20.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Oracle数据库基础知识-11"></a></div><div class="recent-post-info"><a class="article-title" href="/51190.html" title="Oracle数据库基础知识-11">Oracle数据库基础知识-11</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-09-27T02:49:14.000Z" title="发表于 2019-09-27 10:49:14">2019-09-27</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/51190.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/51190.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">序列-sequence
按照指定的序列初始值，按步长进行增长。数值永不重复
默认没有初始值的，nextval的值默认从1开始，默认每次自增+1
可以使用 序列名.nextval坐为主键使用
创建：
create sequence 序列名
create sequence cnum;
序列名.currval查看当前序列的值。开始是没有的。
select cnum.currval from dual—获取当前序列值
序列名.nextval每次执行都会自增一次，默认步长为1
select cnum.nextval from dual—序列自增后返回当前值
create sequence cc–创建序列
start with 90—设定序列初始值
increment by 5—设定步长
maxvalue 10000—设置最大值
cache  10  —–设置缓存
insert into clazz values(cc.nextval,’402班级’,’强班’);


删除序列：drop sequence cc

索引-index
当表中数据量比较大的时候，使用条件查询就会出现效率的问题。使用索引 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/1847.html" title="Oracle数据库基础知识-10">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img//img20200824151925.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Oracle数据库基础知识-10"></a></div><div class="recent-post-info"><a class="article-title" href="/1847.html" title="Oracle数据库基础知识-10">Oracle数据库基础知识-10</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-09-26T12:50:09.000Z" title="发表于 2019-09-26 20:50:09">2019-09-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/1847.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/1847.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">主键约束-primary key
主键：它的值用于唯一地标识表中的某一条记录,且不能为空
创建：
在确定为主键的字段后添加
primary key关键字：create table student(snum number(10) primary key)
在创建表的后面使用
constraints pk_表名_字段名 primary key(字段名)：create table student(snum number(10),constraints pk_student_snum primary key(sum))
在创建表后使用 alter table 表名 add constraints pk_表名_字段名 primary key(字段名)
alter table student add constraints pk_student_snum primary key(snum)


删除主键：alter table 表名 drop constraints pk_表名_字段名
alter table student drop constraints pk_student_snum–删除主 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/28987.html" title="Oracle数据库基础知识-9">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img//img20200824151815.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Oracle数据库基础知识-9"></a></div><div class="recent-post-info"><a class="article-title" href="/28987.html" title="Oracle数据库基础知识-9">Oracle数据库基础知识-9</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-09-26T12:37:09.000Z" title="发表于 2019-09-26 20:37:09">2019-09-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/28987.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/28987.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">数据库表的管理
表的创建
创建表的基本语句：create table 表名（字段名 类型，字段名 类型，字段名 类型….）
创建学生表：学号，姓名，性别，年龄，qq号，邮箱
create table student(snum number(10),—指定学号的数字长度为10sname varchar2(100),—指定姓名的存储上限为100个字节sex char(4),age number,qq number,sal number(6,2),–指定工资的整数位为6和小数位为2mail varchar2(50))


表的修改
添加新字段  alter table 表名 add 字段名 类型
alter table student add phone number(11)
修改字段类型     alter table 表名 modify 字段名 类型
alter table  student modify sname varchar2(200)
删除字段    alter table 表名 drop column 字段名
alter table student drop column p ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/45562.html" title="Oracle数据库基础知识-8">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/博客封面8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Oracle数据库基础知识-8"></a></div><div class="recent-post-info"><a class="article-title" href="/45562.html" title="Oracle数据库基础知识-8">Oracle数据库基础知识-8</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-09-26T12:07:45.000Z" title="发表于 2019-09-26 20:07:45">2019-09-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a href="/45562.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/45562.html" itemprop="commentCount"></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">用户管理
当前用户介绍：权限级别的分配
system：系统账户
sys：超级管理员
scott：普通用户


创建自定义用户: create user 用户名 identified by 密码；
普通用户不具备创建用户的权限，需要使用system账户进行创建。直接创建好的用户不能登录，还需要使用system进行权限的分配（角色：一系列权限的集合）
create user zyp identified by 123456;


给创建的用户赋予角色:grant 角色名，角色名…to 用户名；
grant connect to zyp;–赋予链接库权限
grant resource to zyp;–赋予操作资源权限
grant dba to zyp;–赋予DBA角色
grant dba to zyp


删除用户权限
revoke dba from zyp–删除dba
revoke connect from zyp–删除连接库权限


删除用户
drop user zyp



</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/31/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/31/#content-inner">31</a><span class="page-number current">32</span><a class="page-number" href="/page/33/#content-inner">33</a><a class="page-number" href="/page/34/#content-inner">34</a><a class="extend next" rel="next" href="/page/33/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="https://gitee.com/kylincw/images/raw/master/img/20200807181526.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/kylincw/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Kylin</div><div class="author-info__description">学习不易，努力努力~</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">336</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">414</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">93</div></a></div></div><a class="button--animated" id="card-info-btn"><i class="fas fa-bookmark"></i><span>加入书签</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/kylincw" target="_blank" title="Github"><i class="iconfont icon-github"></i></a><a class="social-icon" href="tencent://message/?Menu=yes&amp;uin=171346168&amp;Service=300&amp;sigT=45a1e5847943b64c6ff3990f8a9e644d2b31356cb0b4ac6b24663a3c8dd0f8aa12a595b1714f9d45" target="_blank" title="qq"><i class="iconfont icon-qq"></i></a><a class="social-icon" href="https://space.bilibili.com/53836035" target="_blank" title="BiliBili"><i class="iconfont icon-bilibili-line"></i></a><a class="social-icon" href="mailto:zhang171346168@qq.com" target="_blank" title="Email"><i class="iconfont icon-email1"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="iconfont icon-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">学习不易，努力努力！</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/1941.html" title="CommandLineRunner和ApplicationRunner"><img data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/images/20200601091329.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CommandLineRunner和ApplicationRunner"/></a><div class="content"><a class="title" href="/1941.html" title="CommandLineRunner和ApplicationRunner">CommandLineRunner和ApplicationRunner</a><time datetime="2021-06-23T13:57:16.727Z" title="更新于 2021-06-23 21:57:16">2021-06-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/19339.html" title="RabbitMQ五种消息模型"><img data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/博客封面12.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RabbitMQ五种消息模型"/></a><div class="content"><a class="title" href="/19339.html" title="RabbitMQ五种消息模型">RabbitMQ五种消息模型</a><time datetime="2021-06-18T08:32:37.433Z" title="更新于 2021-06-18 16:32:37">2021-06-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/43860.html" title="SpringBoot整合RabbitMQ"><img data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/wallhaven-1j66e3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringBoot整合RabbitMQ"/></a><div class="content"><a class="title" href="/43860.html" title="SpringBoot整合RabbitMQ">SpringBoot整合RabbitMQ</a><time datetime="2021-06-17T00:35:44.156Z" title="更新于 2021-06-17 08:35:44">2021-06-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/48032.html" title="shiro的认证"><img data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/博客封面5.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="shiro的认证"/></a><div class="content"><a class="title" href="/48032.html" title="shiro的认证">shiro的认证</a><time datetime="2021-06-01T09:37:38.150Z" title="更新于 2021-06-01 17:37:38">2021-06-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/42111.html" title="shiro权限框架"><img data-lazy-src="https://cdn.jsdelivr.net/gh/kylincw/img/img/博客封面10.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="shiro权限框架"/></a><div class="content"><a class="title" href="/42111.html" title="shiro权限框架">shiro权限框架</a><time datetime="2021-06-01T09:02:16.180Z" title="更新于 2021-06-01 17:02:16">2021-06-01</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-bolt"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Elasticsearch/"><span class="card-category-list-name">Elasticsearch</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/English/"><span class="card-category-list-name">English</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item parent"><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">67</span><i class="fas fa-caret-left "></i></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/IO%E6%B5%81/"><span class="card-category-list-name">IO流</span><span class="card-category-list-count">10</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/JDBC/"><span class="card-category-list-name">JDBC</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/JUC/"><span class="card-category-list-name">JUC</span><span class="card-category-list-count">17</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/JVM/"><span class="card-category-list-name">JVM</span><span class="card-category-list-count">10</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/JVM/%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%8E%A5%E5%8F%A3/"><span class="card-category-list-name">本地方法接口</span><span class="card-category-list-count">1</span></a></li></ul></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/ajax/" style="font-size: 1.15em; color: rgb(112, 120, 121)">ajax</a><a href="/tags/SpringBoot/" style="font-size: 1.35em; color: rgb(194, 78, 74)">SpringBoot</a><a href="/tags/Docker/" style="font-size: 1.25em; color: rgb(91, 90, 163)">Docker</a><a href="/tags/%E5%AE%89%E8%A3%85/" style="font-size: 1.15em; color: rgb(77, 56, 85)">安装</a><a href="/tags/%E5%8D%B8%E8%BD%BD/" style="font-size: 1.15em; color: rgb(68, 169, 171)">卸载</a><a href="/tags/Docker%E7%9A%84%E4%BD%BF%E7%94%A8/" style="font-size: 1.15em; color: rgb(46, 64, 123)">Docker的使用</a><a href="/tags/ES6/" style="font-size: 1.15em; color: rgb(92, 58, 47)">ES6</a><a href="/tags/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0/" style="font-size: 1.15em; color: rgb(195, 53, 52)">箭头函数</a><a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 1.45em; color: rgb(29, 173, 73)">基础</a><a href="/tags/EasyUI/" style="font-size: 1.15em; color: rgb(15, 153, 169)">EasyUI</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">2021年06月</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/05/"><span class="card-archive-list-date">2021年05月</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/03/"><span class="card-archive-list-date">2021年03月</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/12/"><span class="card-archive-list-date">2020年12月</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/11/"><span class="card-archive-list-date">2020年11月</span><span class="card-archive-list-count">33</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/10/"><span class="card-archive-list-date">2020年10月</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/09/"><span class="card-archive-list-date">2020年09月</span><span class="card-archive-list-count">23</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/08/"><span class="card-archive-list-date">2020年08月</span><span class="card-archive-list-count">6</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">336</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2019-08-01T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">485.9k</div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-06-23T14:01:12.157Z"></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/kylincw/img//img20201017211426.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By Kylin</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  function loadValine () {
    function initValine () {
      let initData = {
        el: '#vcomment',
        appId: 'ClIyIUhj1ue2rcRTsApYCR50-gzGzoHsz',
        appKey: 'ATug9IScYQBHILhKWEqBHYxM',
      }
      
      const valine = new Valine(initData)
    }

    if (typeof Valine === 'function') initValine() 
    else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
  }

  window.pjax ? loadValine() : window.addEventListener('load', loadValine)
})()</script><script>function subtitleType () {
  getScript('https://sdk.jinrishici.com/v2/browser/jinrishici.js').then(() => {
    jinrishici.load(function (result) {
      if (true) {
        var sub = "今日事&#44;今日畢,Never put off till tomorrow what you can do today".length == 0 ? new Array() : "今日事&#44;今日畢,Never put off till tomorrow what you can do today".split(',')
        var content = result.data.content
        var both = sub.unshift(content)
        var typed = new Typed('#subtitle', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('subtitle').innerHTML = result.data.content
      }
    })
  })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.17.0/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    let defaultIcon = '?d=robohash'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const serverURL = 'https://cliyiuhj.lc-cn-n1-shared.com'

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": 'ClIyIUhj1ue2rcRTsApYCR50-gzGzoHsz',
        "X-LC-Key": 'ATug9IScYQBHILhKWEqBHYxM',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': getIcon(e.QQAvatar, e.mail),
            'content': changeContent(e.comment),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('valine-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('valine-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script></div></body></html>